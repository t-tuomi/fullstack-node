(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(13),l=t.n(a),u=t(2),c=t(3),s=t.n(c),i="/api/persons",m=function(){return s.a.get(i).then((function(e){return e.data}))},d=function(e){console.log("newobject",e);var n=s.a.post(i,e);return console.log("on postattu"),n.then((function(e){return console.log("returning",e.data),e.data}),(function(e){return console.log("createssa rejected",e)}))},f=function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},p=function(e){return o.a.createElement("div",null,"FIlter names with:",o.a.createElement("br",null),o.a.createElement("input",{value:e.value,onChange:e.eventHandler}))},b=function(e){var n=Object(r.useState)("add new person.."),t=Object(u.a)(n,2),a=t[0],l=t[1],c=Object(r.useState)("number.."),s=Object(u.a)(c,2),i=s[0],m=s[1];return o.a.createElement("div",null,o.a.createElement("h3",null,"Add person or change number"),o.a.createElement("form",{onSubmit:function(n){n.preventDefault();var t=e.persons;if(console.log("add or update"),t.find((function(e){return e.name===a&&e.number===i})))return e.message({level:"WARN",message:a+" with number "+i+"  is already on the book"}),void setTimeout((function(){return e.message({level:"",message:null})}),5e3);if(t.find((function(e){return e.name===a&&e.number!==i}))){if(!window.confirm("Update ".concat(a," with number ").concat(i," ?")))return;e.onUpdatePerson(t.find((function(e){return e.name===a})).id,{name:a,number:i})}else console.log("ees t\xe4\xe4ll\xe4??"),e.onAddPerson({name:a,number:i})}},o.a.createElement("div",null,"name:",o.a.createElement("input",{value:a,onChange:function(e){return l(e.target.value)}}),o.a.createElement("br",null),"number:",o.a.createElement("input",{value:i,onChange:function(e){return m(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},v=function(e){return o.a.createElement("div",null,e.aPerson.name," ",e.aPerson.number,o.a.createElement("button",{onClick:function(){return e.deletePerson(e.aPerson.id)}},"delete"))},E=function(e){console.log("props",e);var n=function(n){console.log("propsit",e),window.confirm("really delete ".concat(e.persons.filter((function(e){return e.id===n}))[0].name))&&g(n).then((function(t){return e.setPersons(e.persons.filter((function(e){return console.log(e.id,n)||e.id!==n})))}))};return o.a.createElement("div",null,o.a.createElement("h3",null,"Numbers"),e.persons.filter((function(n){return n.name.match(new RegExp(e.filterStr,"i"))})).map((function(e,t){return o.a.createElement(v,{key:e.name,aPerson:e,deletePerson:n})})))},h=function(e){var n,t=e.error;switch(console.log(t.level,t.message),t.level){case"INFO":n="green";break;case"WARN":n="orange";break;case"ERROR":n="red";break;default:n="cyan"}var r={color:n,backGround:"lightgrey",fontSize:16,borderStyle:"solid",padding:10,marginBottom:10};return null===t.message?null:o.a.createElement("div",{style:r},t.message)},j=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],l=Object(r.useState)(""),c=Object(u.a)(l,2),s=c[0],i=c[1],g=Object(r.useState)({level:"INFO",message:"some error happened..."}),v=Object(u.a)(g,2),j=v[0],O=v[1];Object(r.useEffect)((function(){m().then((function(e){a(e)}),(function(e){return console.log("hyl\xe4tty>>>>>>>",e)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(h,{error:j}),o.a.createElement(p,{value:s,eventHandler:function(e){i(e.target.value)}}),o.a.createElement(b,{persons:t,onAddPerson:function(e){console.log("add new person",e),d(e).then((function(e){a(t.concat(e)),console.log("persons",t)}),(function(e){return console.log("REJECTED",e)})).then((function(){console.log("lis\xe4tty +++++++++++"),O({level:"INFO",message:"".concat(e.name," successfuly added to book")}),setTimeout((function(){O({level:"",message:null})}),5e3)}),(function(){return console.log("j\xe4lkimm\xe4inen rejected")}))},onUpdatePerson:function(e,n){console.log("updating",e,n),f(e,n).then((function(n){return a(t.map((function(t){return t.id!==e?t:n})))}))},message:O}),o.a.createElement(E,{persons:t,setPersons:a,filterStr:s}))};l.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.5bd80af5.chunk.js.map